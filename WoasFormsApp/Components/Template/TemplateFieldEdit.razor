@inject IDatabaseAccessorService dba

<MudPaper Class="p-2 m-1" Elevation="5">
    <MudStack Spacing="1">

        <MudTextField @bind-Value="Field.Title" Variant="Variant.Filled" Class="p-2" Typo="Typo.h4" T="string" Label="Field Title" Required="true" RequiredError="Title is required!" For="@(() => Field.Title)" />
        <MudTextField @bind-Value="Field.Description" Variant="Variant.Filled" Class="p-2" Typo="Typo.subtitle2" T="string" Label="Field Description" For="@(() => Field.Description)" />


        @switch (@Field.Type.Name)
        {
            case "SingleLine":
                <MudTextField Class="p-1" T="string" Disabled="true" Variant="Variant.Filled" Label="@FieldLabelText" />
                break;
            case "MultiLine":
                <MudTextField Class="p-1" T="string" Lines="3" Disabled="true" Variant="Variant.Filled" Label="@FieldLabelText" />
                break;
            case "PositiveInt":
                <MudNumericField Class="p-1" T="int" Min="1" Disabled="true" Variant="Variant.Filled" Label="@FieldLabelText" />
                break;
            case "CheckBox":
                <MudCheckBox Class="p-1" T="bool" Disabled="true" Variant="Variant.Filled" Label="@FieldLabelText" />
                break;
        }


        <MudToolBar Class="justify-end">
            <MudButton OnClick="() => Field.ShowInAnalytics ^= true"
            StartIcon="@(Field.ShowInAnalytics ? Icons.Material.Filled.Visibility : @Icons.Material.Filled.VisibilityOff)">
                @(Field.ShowInAnalytics ? "Analytics Enabled" : "Analytics Disabled")
            </MudButton>
            <MudIconButton 
                Icon="@Icons.Material.Filled.Delete" Color="Color.Error"
                OnClick="OnDelete" />
        </MudToolBar>
    </MudStack>
</MudPaper>

@code{
    private string FieldLabelText;

    [Parameter, EditorRequired]
    public Template Model { get; set; }

    [Parameter, EditorRequired]
    public TemplateField Field { get; set; }

    [Parameter]
    public EventCallback OnDelete { get; set; }

    protected override void OnInitialized()
    {
        FieldLabelText = $"This field ({Field.Type.Name}) is to be filled by the respondent";
    }
}